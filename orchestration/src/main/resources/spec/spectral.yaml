extends: spectral:oas
functionsDir: "./scripts"
rules:
  oneOfs-with-multi-array:
    description: "[Java SDK] Please limit to one array type per oneOf in responses objects." 
    given:
      - $..responses..oneOf
      - $.components.schemas..oneOf
    severity: warn
    then:
      function: length
      functionOptions:
        max: 1
      field: "[?(@.type=='array')]"

  oneOf-object-distinguishability:
    description: "[Java SDK] oneOf object schemas require unique properties or discriminator for deserialization." 
    message: "{{error}}"
    given:
      - $..responses..oneOf
      - $.components.schemas..oneOf
    severity: warn
    then:
      function: oneOfObjectDistinguishability

functions:
  - "oneOfObjectDistinguishability"
