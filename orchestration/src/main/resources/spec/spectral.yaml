extends: spectral:oas

rules:
  oneOfs-with-multi-array:
    description: "[Java SDK] Cannot handle oneOfs with multiple array options."
    given:
      - $..responses..oneOf
      - $.components.schemas..oneOf
    severity: error
    then:
      function: length
      functionOptions:
        max: 1
      field: "[?(@.type=='array')]"

  oneOf-object-distinguishability:
    given:
      - $..responses..oneOf
      - $.components.schemas..oneOf
    severity: warn
    then:
      function: oneOfObjectDistinguishability

functions:
  - "oneOfObjectDistinguishability"
